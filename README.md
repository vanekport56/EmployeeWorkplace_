# Кабинет сотрудника

## Описание
Кабинет сотрудника предназначен для работы с документами, предоставляя пользователям доступ к созданию отпусков, создание заявок на предоставление справок, просмотр зарплаты. Система поддерживает несколько ролей пользователей: администраторы и обычные пользователи. Администраторы имеют расширенные права для редактирования всех документов и управления пользователями.

## Основные функции
- Регистрация и авторизация пользователей с ролями "администратор" и "пользователь".
- Управление документами:
    - Создание, просмотр, редактирование и удаление документов.
    - Фильтрация заказанных справок по следующим критериям:
        - Тип документа.
        - Дата создания.
        - Идентификатор пользователя.
        - Наличие вложенного файла (Ответа на запрос справки).
- Панель администратора:
    - Управление пользователями (просмотр, редактирование профилей).
    - Полный доступ к документам всех пользователей.
- Кэширование запросов с логированием получения данных из кэша или сервера.
- Локализованная обработка ошибок и логирование событий на русском языке.

## Технологии
Проект построен с использованием следующих технологий и библиотек:
- **Java 17** — язык программирования.
- **Spring Boot 3.3.2** — основа приложения для создания REST API и управления конфигурацией.
- **Spring Security** — для аутентификации и авторизации пользователей.
- **PostgreSQL** — реляционная база данных.
- **FreeMarker 2.3.33** — для работы с HTML-шаблонами.
- **SLF4J** — для логирования.
- **Lombok** — для генерации геттеров, сеттеров и других методов.
- **Swagger** — для документирования REST API.
- **JUnit 5** — для написания и выполнения модульных тестов.
- **Docker** — для контейнеризации приложения и базы данных.
- **Kafka** — для обработки сообщений между микросервисами.
- **MapStruct** — для автоматического маппинга между DTO и сущностями.
- **Javadoc** — для документирования кода.
- **Flyway** — для миграции базы данных.
- **Testcontainers** — для тестирования с использованием контейнеров.

## В проекте используются несколько баз данных для реализации следующих преимуществ:

1. **Производительность и масштабируемость:** Разделение данных на отдельные базы может улучшить производительность и масштабируемость системы. Операции с пользовательскими данными и документами обрабатываются независимо, что снижает нагрузку на каждую из баз данных.

2. **Безопасность:** Пользовательские данные и данные документов имеют разные уровни конфиденциальности и могут подлежать различным требованиям защиты. Разделение данных помогает лучше контролировать доступ и защиту информации.

3. **Удобство миграции:** Каждую базу данных можно мигрировать и управлять ею независимо с помощью инструментов миграции, таких как Flyway. Это упрощает обновление схемы и данных без влияния на другие части системы.

### Структура баз данных

#### Primary база данных
Primary база данных предназначена для хранения документов, таких как отпускные заявления, справки и другие юридически значимые документы. Основные таблицы включают:
- **salary_offset:** Документы, связанные с зарплатой.
- **vacation_without_salary:** Отпускные заявления без сохранения заработной платы.
- **vacation_with_salary:** Отпускные заявления с сохранением заработной платы.
- **certificate:** Справки, предоставляемые пользователям.
- **tax_certificate:** 2-НДФЛ справки.

#### Secondary база данных
Secondary база данных используется для управления пользователями, их регистрацией, аутентификацией и авторизацией. Это позволяет хранить пользовательские данные отдельно от документации, что улучшает безопасность и управление правами доступа. Основные таблицы включают:
- **user:** Таблица для хранения информации о пользователях, их ролях и данных для аутентификации.
## Структура проекта

- **Config** — конфигурационные файлы для настройки безопасности, кэширования и других компонентов.
- **Controller** — контроллеры для обработки запросов пользователей.
- **Dto** — объекты передачи данных между уровнями приложения.
- **Exceptions** — обработчики исключений.
- **Mapper** — классы для преобразования моделей в DTO и обратно.
- **Models** — классы, описывающие сущности системы:
    - **Primary** — основные модели.
    - **Secondary** — вторичные модели.
- **ConstantsDocuments** — константы, связанные с типами документов.
- **ConstantsOrderedDocuments** — константы, связанные с типами справок.
- **Repositories** — интерфейсы для работы с базой данных.
    - **Primary** — основные интерфейсы.
    - **Secondary** — вторичные интерфейсы.
- **Security** — классы для настройки безопасности приложения.
- **Services** — бизнес-логика приложения.
- **Utils** — вспомогательные утилиты.

### Требования:
- **Java 17**
- **PostgreSQL**
- **Maven**
- **Docker**
